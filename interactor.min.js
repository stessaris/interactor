const _version_="1.5.3+nxtg";var Interactor=function(config){this.__init__(config)};Interactor.prototype={__init__:function(config){var interactor=this;return this.interactions="boolean"!=typeof config.interactions||config.interactions,this.interactionElement="string"==typeof config.interactionElement?config.interactionElement:"interaction",this.interactionEvents=!0===Array.isArray(config.interactionEvents)?config.interactionEvents:["mouseup","touchend"],this.conversions="boolean"!=typeof config.conversions||config.conversions,this.conversionElement="string"==typeof config.conversionElement?config.conversionElement:"conversion",this.conversionEvents=!0===Array.isArray(config.conversionEvents)?config.conversionEvents:["mouseup","touchend"],this.endpoint="string"==typeof config.endpoint?config.endpoint:"/interactions",this.async="boolean"!=typeof config.async||config.async,this.debug="boolean"!=typeof config.debug||config.debug,this.storage="boolean"!=typeof config.storage||config.storage,this.records=[],this.session={},this.loadTime=new Date,this.__initializeSession__(),this.__bindEvents__(),this},__bindEvents__:function(){var interactor=this;if(!0===interactor.interactions)for(const eventName of interactor.interactionEvents)document.querySelector("body").addEventListener(eventName,(function(e){e.stopPropagation(),e.target.classList.contains(interactor.interactionElement)&&interactor.__addInteraction__(e,"interaction")}));if(!0===interactor.conversions)for(const eventName of interactor.conversionEvents)document.querySelector("body").addEventListener(eventName,(function(e){e.stopPropagation(),e.target.classList.contains(interactor.conversionEvents)&&interactor.__addInteraction__(e,"conversion")}));return document.addEventListener("visibilitychange",(function logData(){"hidden"===document.visibilityState&&interactor.__sendInteractions__()})),interactor},__addInteraction__:function(e,type){var interactor=this,interaction={type:type,event:e.type,targetTag:e.target.nodeName,targetClasses:e.target.className,content:e.target.innerText,targetId:e.target.id,clientPosition:{x:e.clientX,y:e.clientY},screenPosition:{x:e.screenX,y:e.screenY},createdAt:new Date};return this.records.push(interaction),this.debug&&console.log("Interaction:\n",interaction,JSON.stringify(interaction)),this},__initializeSession__:function(){var interactor=this;return this.session={loadTime:this.loadTime,unloadTime:new Date,language:window.navigator.language,platform:window.navigator.platform,port:window.location.port,clientStart:{name:window.navigator.appVersion,innerWidth:window.innerWidth,innerHeight:window.innerHeight,outerWidth:window.outerWidth,outerHeight:window.outerHeight},page:{location:window.location.pathname,href:window.location.href,origin:window.location.origin,title:document.title},endpoint:this.endpoint},this},__closeSession__:function(){var interactor=this;return this.session.unloadTime=new Date,this.session.interactions=this.records,this.session.clientEnd={name:window.navigator.appVersion,innerWidth:window.innerWidth,innerHeight:window.innerHeight,outerWidth:window.outerWidth,outerHeight:window.outerHeight},this.storage&&(this.session.storage=Object.fromEntries(Object.entries(window.sessionStorage))),this.debug&&console.log("Session:\n",JSON.stringify(this.session)),this},__sendInteractions__:function(){var interactor=this;this.__closeSession__(),this.debug&&console.log(`Sending interaction data to ${this.endpoint}`);let blob=new Blob([JSON.stringify(this.session)],{type:"application/json"});return navigator.sendBeacon(this.endpoint,blob),this}};